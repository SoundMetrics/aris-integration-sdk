## Connect C Program

This sample program searches the local network for an ARIS sonar with a given serial number and connects to it.  Connecting to an ARIS requires establishing a TCP connection with the sonar and sending acoustic settings, salinity and focus commands in that order.  After those initial commands have been sent the program sends the sonar a target port for the UDP frame stream and begins receiving frame parts.  After about 30 seconds the program closes the connection and exits.

This sample program does nothing with the incoming frame parts except to log the frame index to the console as it increments.  The program does not assemble frame parts into complete frames nor does it reorder sonar image data for displaying.  For C++ code that can be used to receive and assemble frame parts see the [FrameStream](https://github.com/SoundMetrics/aris-integration-sdk/tree/master/common/code/FrameStream) portion of this SDK.  For an example of how to reorder sonar image data see the [reorder](https://github.com/SoundMetrics/aris-integration-sdk/tree/master/sample-code/reorder-frame) sample program also included in this SDK.

### Program Usage

    connect <sonar-serial-number>

### Protocol Buffers Definitions

The `availability.pbc-c.c`, `commands.pbc-c.c` and `frame_stream.pbc-c.c` source files and their accompanying C header files are generated by the [protoc-c tool](https://github.com/protobuf-c/protobuf-c) at build time.  The .proto definition files used to generate the necessary message serialization and deserialization code for this sample can be found in [protobuf](https://github.com/SoundMetrics/aris-integration-sdk/tree/master/common/protobuf).  See the [protobuf-c README](https://github.com/protobuf-c/protobuf-c#building) for instructions on how to compile and install the protoc-c tool and protobuf-c library on your Linux distro.

### C Code

The C code in this sample is standard C99 and uses the POSIX Socket API.  It builds and runs on Linux.

### gcc

A makefile is provided in `.\linux`.  The makefile is known to work on Ubuntu 14.04.
